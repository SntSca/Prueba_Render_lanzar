<div class="rating-wrap" [class.disabled]="!enabled">

  <div class="stars" (mouseleave)="onLeave()">
    <button
      *ngFor="let s of stars; let i = index"
      type="button"
      class="star"
      [disabled]="!enabled || alreadyRated || loading"
      (mousemove)="onMove($event, i + 1)"
      (click)="onClick(i + 1, $event)"
      [attr.aria-label]="'Valorar con ' + (i + 1) + ' estrellas'">
      <svg viewBox="0 0 24 24" class="icon">
        <defs>
          <linearGradient id="halfGrad" x1="0%" y1="0%" x2="100%" y2="0%">
            
            <stop offset="0%" stop-color="currentColor"></stop>
            <stop offset="50%" stop-color="currentColor"></stop>
            
            <stop offset="50%" stop-color="transparent"></stop>
            <stop offset="100%" stop-color="transparent"></stop>
          </linearGradient>
        </defs>

        <path
          class="star-base"
          d="M12 2l3.09 6.26 6.91.99-5 4.88 1.18 6.87L12 17.77 5.82 21l1.18-6.87-5-4.88 6.91-.99L12 2z"
        />

        <path
          *ngIf="starFill(i + 1) === 'full'"
          class="star-fill"
          d="M12 2l3.09 6.26 6.91.99-5 4.88 1.18 6.87L12 17.77 5.82 21l1.18-6.87-5-4.88 6.91-.99L12 2z"
        />

        <path
          *ngIf="starFill(i + 1) === 'half'"
          class="star-fill half"
          d="M12 2l3.09 6.26 6.91.99-5 4.88 1.18 6.87L12 17.77 5.82 21l1.18-6.87-5-4.88 6.91-.99L12 2z"
        />
      </svg>
    </button>
  </div>

  <div class="numbers">
    <span class="avg">{{ avg | number: '1.1-1' }}</span>
    <span class="sep">Â·</span>
    <span class="count">{{ count }}</span>
  </div>

  <div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>
  <div *ngIf="alreadyRated" class="hint">
    Ya has valorado este contenido.
  </div>
</div>
